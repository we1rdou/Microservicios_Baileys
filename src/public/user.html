<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Usuario - WhatsApp</title>
  <script src="https://cdn.jsdelivr.net/npm/qrcode/build/qrcode.min.js"></script>
  <link rel="stylesheet" href="./css/style.css">
  <script src="./js/user.js" defer></script>
</head>
<body>
  <div class="container">
    <div class="header-container">
      <div class="header-top">
        <div>
          <h2>Bienvenido, <span id="nombreUsuario">...</span></h2>
          <button id="unlinkDeviceBtn" class="danger-btn">Desvincular dispositivo</button>
        </div>
        <div class="button-group">
          <button id="logoutBtn">Cerrar sesi√≥n</button>
        </div>
      </div>
      
      <div class="status-container">
        <div id="estadoConexion" class="connection-status">
          <span class="status-icon">‚è≥</span>
          <span class="status-text">Verificando conexi√≥n...</span>
        </div>
      </div>
    </div>

    <div class="main-container">
      <div class="qr-container">
        <div id="qr" class="hidden">Cargando QR...</div>
        <div id="alerta" class="hidden"></div>
        <button id="recargarQRBtn" class="hidden">Recargar QR</button>
      </div>
      
      <div class="token-btn-container">
        <button id="verTokenBtn" class="hidden">üîí Ver Token</button>
      </div>
    </div>
  </div>

  <!-- Modal de confirmaci√≥n para desvincular -->
  <div id="unlinkModal" class="modal">
    <div class="modal-content">
      <h3>¬øDesvincular dispositivo?</h3>
      <p>Esta acci√≥n eliminar√° permanentemente la asociaci√≥n con tu cuenta.</p>
      <div class="modal-buttons">
        <button id="confirmUnlinkBtn" class="danger-btn">Confirmar</button>
        <button id="cancelUnlinkBtn">Cancelar</button>
      </div>
    </div>
  </div>

  <!-- Modal para token -->
  <div id="tokenModal" class="modal">
    <div class="modal-content">
      <!-- Formulario para contrase√±a -->
      <div id="passwordPrompt">
        <h3>Verificar Identidad</h3>
        <input type="password" id="tokenPassword" placeholder="Ingresa tu contrase√±a">
        <div class="modal-buttons">
          <button id="confirmTokenAccess">Confirmar</button>
          <button id="cancelTokenAccess">Cancelar</button>
        </div>
      </div>
      
      <!-- Token visible -->
      <div id="tokenDisplay" class="hidden">
        <h3>Tu Token de Dispositivo</h3>
        <div class="token-value" id="tokenValue"></div>
        <div class="token-actions">
          <button id="copyTokenBtn">üìã Copiar</button>
          <button id="downloadTokenBtn">‚¨áÔ∏è Descargar</button>
        </div>
      </div>
    </div>
  </div>
</body>
</html>